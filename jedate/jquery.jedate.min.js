/**
 @Name : jeDate v3.8.3 日期控件
 @Author: chen guojun
 @Date: 2017-06-01
 @QQ群：516754269
 @官网：http://www.jemui.com/ 或 https://github.com/singod/jeDate
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b():a.jeDate=b(window.jQuery||$)}(this,function(a){function b(a,b){this.opts=b,this.valCell=a,this.init()}var c={},d=document,e="YYYY|MM|DD|hh|mm|ss|zz",f="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),g=function(a){return window.parseInt(a,10)},h={skinCell:"jedateblue",language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],clear:"清空",today:"今天",yes:"确定",close:"关闭"},trigger:"click",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"};a.fn.jeDate=function(c){return this.each(function(){return new b(a(this),c||{})})},a.extend({jeDate:function(c,d){return a(c).each(function(){return new b(a(this),d||{})})}}),c.isObj=function(a){for(var b in a)return!0;return!1},c.reMacth=function(a){return a.match(/\w+|d+/g)},c.docScroll=function(a){return a=a?"scrollLeft":"scrollTop",d.body[a]|d.documentElement[a]},c.winarea=function(a){return d.documentElement[a?"clientWidth":"clientHeight"]},c.isLeap=function(a){return a%100!=0&&a%4==0||a%400==0},c.getDaysNum=function(a,b){var d=31;switch(g(b)){case 2:d=c.isLeap(a)?29:28;break;case 4:case 6:case 9:case 11:d=30}return d},c.getYM=function(a,b,c){var d=new Date(a,b-1);return d.setMonth(b-1+c),{y:d.getFullYear(),m:d.getMonth()+1}},c.getPrevMonth=function(a,b,d){return c.getYM(a,b,0-(d||1))},c.getNextMonth=function(a,b,d){return c.getYM(a,b,d||1)},c.digit=function(a){return a<10?"0"+(0|a):a},c.IsNum=function(a){return!!/^[+-]?\d*\.?\d*$/.test(a)},c.parse=function(b,d,f){b=b.concat(d);var h={},i=e.split("|");return a.each(b,function(a,b){h[i[a]]=g(b)}),f.replace(new RegExp(e,"g"),function(a,b){return"zz"==a?"00":c.digit(h[a])})},c.checkFormat=function(a){var b=[];return a.replace(new RegExp(e,"g"),function(a,c){b.push(a)}),b.join("-")},c.parseMatch=function(a){var b=a.split(" ");return c.reMacth(b[0])},c.testFormat=function(b,c){var d=["YYYY","MM","DD"],f=[],g=[];return b.replace(new RegExp(e,"g"),function(a,b){f.push(a)}),a.each(d,function(b,c){a.each(f,function(a,b){c==b&&g.push(b)})}),("hh"==b.substring(0,2)?f.join("-"):g.join("-"))==c},c.checkDate=function(a){var b=c.reMacth(a);if(isNaN(b[0])||isNaN(b[1])||isNaN(b[2]))return!1;if(b[1]>12||b[1]<1)return!1;if(b[2]<1||b[2]>31)return!1;if((4==b[1]||6==b[1]||9==b[1]||11==b[1])&&b[2]>30)return!1;if(2==b[1]){if(b[2]>29)return!1;if((b[0]%100==0&&b[0]%400!=0||b[0]%4!=0)&&b[2]>28)return!1}return!0},c.returnDate=function(b,d,e){d=d||"YYYY-MM-DD hh:mm:ss";var h=void 0==e||""==e||e==[],i=h?[]:c.reMacth(e),j=[];h||(i[1]-=1,i[1]=-1==i[1]?12:i[1]);var k=i.length>0?new Date(i[0],i[1],i[2]||0,i[3]||0,i[4]||0,i[5]||0):new Date,l=k.getMonth(),m=k.getDate(),n=[k.getFullYear(),l,m,k.getHours(),k.getMinutes(),k.getSeconds()];a.each(f.split("|"),function(a,c){j.push(b[c]||"")});var o,p,q=c.getDaysNum(n[0],n[1]+1),r=31==q&&31==c.digit((new Date).getDate()),s=n[2]+g(j[2]||0);o=r?s-1:s;var t=new Date(n[0]+g(j[0]||0),n[1]+g(j[1]||0),o,n[3]+g(j[3]||0),n[4]+g(j[4]||0),n[5]+g(j[4]||0));return p=r?c.digit(g(t.getDate())+1):c.digit(t.getDate()),c.parse([t.getFullYear(),g(t.getMonth())+1,p],[c.digit(t.getHours()),c.digit(t.getMinutes()),c.digit(t.getSeconds())],d)},c.isValHtml=function(a){return/textarea|input/.test(a[0].tagName.toLocaleLowerCase())},c.isBool=function(a){return void 0==a||1==a},c.sortDate=function(b,d){var e={},g=[],h=f.split("|"),i="hh"==c.checkFormat(d).substring(0,2),j=c.IsNum(b)?c.reMacth(i?b.replace(/(.{2})/g,"$1,"):b.substr(0,4).replace(/^(\d{4})/g,"$1,")+b.substr(4).replace(/(.{2})/g,"$1,")):c.reMacth(b),k=c.IsNum(b)?c.reMacth(i?d.replace(/(.{2})/g,"$1,"):d.substr(0,4).replace(/^(\w{4})/g,"$1,")+d.substr(4).replace(/(.{2})/g,"$1,")):c.reMacth(d);return a.each(j,function(a,b){e[k[a]]=b}),a.each(j,function(a,b){var c=i?h[3+a]:h[a];g.push(e[c])}),c.IsNum(b)?c.reMacth(i?b.replace(/(.{2})/g,"$1,"):b.substr(0,4).replace(/^(\d{4})/g,"$1,")+b.substr(4).replace(/(.{2})/g,"$1,")):g};var i=function(){for(var a="",b=[1,2,3,4,5,6,7,8,9,0],c=0;c<8;c++)a+=b[Math.round(Math.random()*(b.length-1))];return a},j=b.prototype,k="jefixed";return j.init=function(){var b=this,d=b.opts,e=new Date,f=void 0!=d.trigger?d.trigger:h.trigger,g=void 0==d.zIndex?2099:d.zIndex,j=void 0!=d.isinitVal&&0!=d.isinitVal;c.fixed=c.isBool(d.fixed);var k=void 0==d.fixedCell||""==d.fixedCell?"":"#"+this.opts.fixedCell,l=function(a){var b,f=d.format||h.format,g=d.initAddVal||{},i=d.hmsSetVal||{};b=c.isObj(i)?c.parse([e.getFullYear(),c.digit(e.getMonth()+1),c.digit(e.getDate())],[c.digit(i.hh),c.digit(i.mm),c.digit(i.ss)],f):c.returnDate(g,f),""==(a.val()||a.text())?c.isValHtml(a)?a.val(b):a.text(b):c.isValHtml(a)?a.val():a.text()},m=function(e,f){var i=a("<div/>",{id:f.replace(/\#/g,""),class:"jedatebox "+(d.skinCell||h.skinCell)}),j=a(k).length>0?"relative":1==c.fixed?"absolute":"fixed";i.attr("author","chen guojun").css({"z-index":"#jedatebox"!=f?"":g,position:j,display:"block"}),"#jedatebox"!=f&&i.attr({jeformat:d.format||h.format,jefixed:k}),c.minDate=d.minDate||h.minDate,c.maxDate=d.maxDate||h.maxDate,a(e).append(i),b.setHtml(d,f)};if(j&&0!=f&&b.valCell.each(function(){l(a(this))}),a(k).length>0){var n="#jedatebox"+i();m(k,n)}else{var o=["body","#jedatebox"];0!=f?b.valCell.on(f,function(b){b.stopPropagation(),a(o[1]).length>0||m(o[0],o[1])}):m(o[0],o[1])}},j.setHtml=function(b,d){c.boxelem=a(a(d).attr(k)).length>0?d:"#jedatebox",c.format=a(a(d).attr(k)).length>0?a(c.boxelem).attr("jeformat"):b.format||h.format,c.formatType=c.checkFormat(c.format);var e=this,f=a(c.boxelem),g=c.testFormat(c.format,"YYYY-MM"),i=c.testFormat(c.format,"YYYY"),j='<div class="jedatetop"></div><div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul></div><ol class="jedaol"></ol><ul class="'+(g||i?i?"jedayy":"jedaym":"jedaul")+'"></ul><div class="jedateprophms"></div><div class="jedatebot"></div>';f.empty().append(j),e.generateHtml(b,f)},j.isContainhh=function(a){var b=c.checkFormat(a);return c.reMacth("hh-"+b.split("hh")[1])},j.generateHtml=function(b,d){var e,f=this,i=f.valCell,j="",l=new Date,m=b.language||h.language,n=c.testFormat(c.format,"YYYY-MM"),o=c.testFormat(c.format,"YYYY"),p="hh"==c.format.substring(0,2),q=d.find(".jedatetop"),r=d.find(".jedatetopym"),s=d.find(".jedaol"),t=d.find(".jedateprophms"),u=d.find(".jedatebot");if(""==(i.val()||i.text()))e=[l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()],c.currDate=new Date(e[0],g(e[1])-1,e[2],e[3],e[4],e[5]),c.ymdDate=e[0]+"-"+c.digit(e[1])+"-"+c.digit(e[2]);else{var v=c.isValHtml(i)?i.val():i.text(),w=c.sortDate(v,c.format);p?(e=[l.getFullYear(),l.getMonth()+1,l.getDate(),w[0],w[1]||l.getMinutes(),w[2]||l.getSeconds()],c.currDate=new Date(l.getFullYear(),l.getMonth()-1,l.getDate())):(e=[w[0],void 0==w[1]?l.getMonth()+1:w[1],void 0==w[2]?l.getDate():w[2],void 0==w[3]?l.getHours():w[3],void 0==w[4]?l.getMinutes():w[4],void 0==w[5]?l.getSeconds():w[5]],c.currDate=new Date(e[0],g(e[1])-1,e[2],e[3],e[4],e[5]),c.ymdDate=e[0]+"-"+c.digit(e[1])+"-"+c.digit(e[2]))}var x='<div class="jedatepropcon"><div class="jedatehmstitle">'+("cn"==m.name?"时间选择":"Time to choose")+'<div class="jedatehmsclose">&times;</div></div><div class="jedateproptext">'+m.times[0]+'</div><div class="jedateproptext">'+m.times[1]+'</div><div class="jedateproptext">'+m.times[2]+'</div><div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div></div>',y='<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" maxlength="2" numval="23" hms="0"></li><i>:</i><li><input type="text" maxlength="2" numval="59" hms="1"></li><i>:</i><li><input type="text" maxlength="2" numval="59" hms="2"></li></ul></div><div class="botflex jedatebtn"><span class="jedateok">'+m.yes+'</span><span class="jedatetodaymonth">'+m.today+'</span><span class="jedateclear">'+m.clear+"</span></div>",z='<p><span class="jedateymchle">&lt;&lt;</span><span class="jedateymchri">&gt;&gt;</span><span class="jedateymchok">'+m.close+"</span></p>";if(p?d.children(".jedatetop,.jedatetopym,.jedaol,.jedaul").remove():q.append('<div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div>'),n||o?(d.children(".jedatetopym,.jedaol").remove(),u.find(".jedatetodaymonth").hide(),q.children().css({width:"100%"}).first().remove(),q.children().find(".pndrop").remove(),d.find(n?".jedaym":".jedayy").append(f.eachYM(b,e[0],e[1],d))):(r.append(z),s.append(function(){return a.each(m.weeks,function(a,b){j+='<li class="weeks" data-week="'+b+'">'+b+"</li>"}),j})),u.append(y),c.isBool(b.isClear)||u.find(".jedateclear").hide(),n||o||p?u.find(".jedatetodaymonth").hide():c.isBool(b.isToday)||u.find(".jedatetodaymonth").hide(),c.isBool(b.isok)||u.find(".jedateok").hide(),/\DD/.test(c.format)&&f.createDaysHtml(e[0],e[1],b,d),/\hh/.test(c.format)){t.append(x).addClass(p?"jedatepropfix":"jedateproppos").css({display:p?"block":"none"});var A=f.isContainhh(c.format),B=b.hmsSetVal||{},C=""==(i.val()||i.text())&&c.isObj(B)?B:{hh:e[3],mm:e[4],ss:e[5]};a.each(["hh","mm","ss"],function(a,d){var e=void 0==A[a]||"zz"==A[a],f=u.find("input[hms="+a+"]");f.val(e?"00":c.digit(C[d])).attr("readOnly",!c.isBool(b.ishmsVal)),0!=A.length&&e&&f.attr("disabled",!0)})}else u.find(".jedatehmsshde").hide(),u.find(".jedatebtn").css({width:"100%"});if(c.isBool(b.isTime)||(u.find(".botflex").css({width:"100%"}),u.find(".jedatehmsshde").hide()),f.eventsDate(b,d),0==a(a(c.boxelem).attr(k)).length){var D=b.position||[];D.length>0?d.css({top:D[0],left:D[1]}):f.orien(d,i)}setTimeout(function(){b.success&&b.success(i)},50)},j.createDaysHtml=function(b,d,e,f){var i=this,j=g(b),k=g(d),l="",m=0,n=e.language||h.language,o=e.isvalid||[],p=c.reMacth(c.minDate),q=p[0]+p[1]+p[2],r=c.reMacth(c.maxDate),s=r[0]+r[1]+r[2],t=new Date(j,k-1,1).getDay()||7,u=c.getDaysNum(j,k),v=c.getPrevMonth(j,k),w=c.getDaysNum(j,v.m),x=c.getNextMonth(j,k),y=c.currDate.getFullYear()+"-"+c.digit(c.currDate.getMonth()+1)+"-"+c.digit(1),z=j+"-"+c.digit(k)+"-"+c.digit(1);f.find(".jedateyear").attr("year",j).text(j+("cn"==n.name?"年":"")),f.find(".jedatemonth").attr("month",k).text(k+("cn"==n.name?"月":""));var A=function(b,d,f){var g=e.marks,h=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};return a.isArray(g)&&g.length>0&&h(g,b+"-"+c.digit(d)+"-"+c.digit(f))?'<i class="marks"></i>':""},B=function(a,b,c){var d;if(1==e.festival&&"cn"==n.name){var f=jeLunar(a,b-1,c),g=f.solarFestival||f.lunarFestival;d='<p><span class="solar">'+c+'</span><span class="lunar">'+(""!=(g&&f.jieqi)?g:f.jieqi||f.showInLunar)+"</span></p>"}else d='<p class="nolunar">'+c+"</p>";return d},C=function(a,b,d,e){var f=(a+"-"+c.digit(b)+"-"+c.digit(d)).replace(/\-/g,"");if(e){if(g(f)>=g(q)&&g(f)<=g(s))return!0}else if(g(q)>g(f)||g(s)<g(f))return!0};if(o.length>0)var D=new RegExp(o[0].replace(/,/g,"|"));for(var E=w-t+1;E<=w;E++,m++){var F,G=A(v.y,v.m,E);F=o.length>0?C(v.y,v.m,E,!1)?"disabled":D.test(E)?1==o[1]?"other":"disabled":1==o[1]?"disabled":"other":C(v.y,v.m,E,!1)?"disabled":"other",l+='<li data-ymd="'+v.y+"-"+v.m+"-"+E+'" class='+F+">"+(B(v.y,v.m,E)+G)+"</li>"}for(var H=1;H<=u;H++,m++){var I="",J=A(j,k,H),K=j+"-"+c.digit(k)+"-"+c.digit(H);I=C(j,k,H,!0)?o.length>0?c.ymdDate==K?c.ymdDate==K?"action":y!=z&&z==K?"action":"":D.test(H)?1==o[1]?"":"disabled":1==o[1]?"disabled":"":c.ymdDate==K?"action":y!=z&&z==K?"action":"":"disabled","action"==I&&f.children("ul").attr("dateval",j+"-"+k+"-"+H),l+='<li data-ymd="'+j+"-"+k+"-"+H+'" class='+(""!=I?I:"")+">"+(B(j,k,H)+J)+"</li>"}for(var L=1,M=42-m;L<=M;L++){var N,O=A(x.y,x.m,L);N=o.length>0?C(x.y,x.m,L,!1)?"disabled":D.test(L)?1==o[1]?"other":"disabled":1==o[1]?"disabled":"other":C(x.y,x.m,L,!1)?"disabled":"other",l+='<li data-ymd="'+x.y+"-"+x.m+"-"+L+'" class='+N+">"+(B(x.y,x.m,L)+O)+"</li>"}f.find(".jedaul").empty().html(l),i.chooseDays(e,f)},j.eachStrhms=function(b,d){var e=this,f=[],g=void 0==c.minDate.split(" ")[1]?"00:00:00":c.minDate.split(" ")[1],h=void 0==c.maxDate.split(" ")[1]?"00:00:00":c.maxDate.split(" ")[1],i=c.reMacth(g),j=c.reMacth(h);return a.each([24,60,60],function(a,g){for(var h="",k="",l=e.isContainhh(c.format),m=d.find(".jedatehms input").eq(a).val(),n=0;n<g;n++)n=c.digit(n),k=c.isBool(b.hmsLimit)?0==l.length||void 0!=l[a]&&"zz"!=l[a]?m==n?"action":"":"disabled":n<i[a]||n>j[a]?n==m?"disabled action":"disabled":n==m?"action":"",h+='<p class="'+k+'">'+n+"</p>";f.push(h)}),f},j.eachYM=function(b,d,e,f){var i,j="",k=b.language||h.language,l=this.valCell,m=new Date;return c.testFormat(c.format,"YYYY")?(c.yearArr=new Array(15),a.each(c.yearArr,function(a){var b=c.parseMatch(c.minDate),e=c.parseMatch(c.maxDate),h=b[0],i=e[0],k=d-7+a,n=c.reMacth(c.isValHtml(l)?l.val():l.text()),o=""==(l.val()||l.text())?m.getFullYear():n[0];j+=k<h||k>i?"<li class='disabled' yy='"+k+"'>"+k+"</li>":"<li class='"+(g(o)==k?"action":"")+"' yy='"+k+"'>"+k+"</li>",g(o)==k&&f.children("ul").attr("dateval",k)}),i=d):(a.each(k.month,function(a,b){var g=c.parseMatch(c.minDate),h=c.parseMatch(c.maxDate),i=new Date(d,c.digit(b),"01"),k=new Date(g[0],g[1],g[2]),l=new Date(h[0],h[1],h[2]);j+=i<k||i>l?"<li class='disabled' ym='"+d+"-"+c.digit(b)+"'>"+d+"-"+c.digit(b)+"</li>":"<li class='"+(e==b?"action":"")+"' ym='"+d+"-"+c.digit(b)+"'>"+d+"-"+c.digit(b)+"</li>",e==b&&f.children("ul").attr("dateval",d+"-"+c.digit(b))}),i=d+"-"+c.digit(e)),f.find(".jedatetop .jedateyear").text(i),j},j.orien=function(a,b,d){var e,f,g,h,i=c.fixed?b[0].getBoundingClientRect():a[0].getBoundingClientRect();c.fixed?(f=i.right+a.outerWidth()/1.5>=c.winarea(1)?i.right-a.outerWidth():i.left+(d?0:c.docScroll(1)),e=i.bottom+a.outerHeight()/1<=c.winarea()?i.bottom-1:i.top>a.outerHeight()/1.5?i.top-a.outerHeight()-1:c.winarea()-a.outerHeight(),g=Math.max(e+(d?0:c.docScroll())+1,1)+"px",h=f+"px"):(g="50%",h="50%",a.css({"margin-top":-i.height/2,"margin-left":-i.width/2})),a.css({top:g,left:h})},j.lunarOrien=function(a,b,d){var e,f,g,h,i=b[0].getBoundingClientRect();return f=i.right+a[0].offsetWidth/1.5>=c.winarea(1)?i.right-a[0].offsetWidth:i.left+(d?0:c.docScroll(1)),e=i.bottom+a[0].offsetHeight/1<=c.winarea()?i.bottom-1:i.top>a[0].offsetHeight/1.5?i.top-a[0].offsetHeight-1:c.winarea()-a[0].offsetHeight,g=Math.max(e+(d?0:c.docScroll())+1,1)+"px",h=f+"px",{top:g,left:h}},j.dateClose=function(){0==a(a(c.boxelem).attr(k)).length&&a(c.boxelem).remove()},j.eventsDate=function(b,d){var e=this,f=e.valCell,i=b.language||h.language,j="hh"==c.checkFormat(c.format).substring(0,2);if(j||e.chooseYearMonth(b,d),(c.testFormat(c.format,"YYYY")||c.testFormat(c.format,"YYYY-MM"))&&(e.preNextYearMonth(b,d),e.onlyYMevents(b,d)),/\hh/.test(c.format)){var l=d.find(".jedateprophours"),m=d.find(".jedatepropminutes"),n=d.find(".jedatepropseconds"),o=d.find(".jedateprophms"),p=155,q=function(){var f=e.eachStrhms(b,d),g=e.isContainhh(c.format);o.css("display","block"),a.each([l,m,n],function(a,b){""==b.html()&&b.html(f[a])}),a.each(["hours","minutes","seconds"],function(b,e){var f=d.find(".jedateprop"+e),h=f.find(".action"),i=f.find("p");0!=g.length&&void 0!=g[b]&&"zz"!=g[b]&&(f[0].scrollTop=h[0].offsetTop-p),i.on("click",function(){var e=a(this);e.hasClass("disabled")||(e.addClass("action").siblings().removeClass("action"),d.find(".jedatebot .jedatehms input").eq(b).val(c.digit(e.text())),j||d.find(".jedateprophms").hide())})})};j?(q(),o.find(".jedatehmsclose").css("display","none")):d.find(".jedatehms").on("click",function(){q(),!j&&o.find(".jedatehmsclose").on("click",function(){o.css("display","none")})})}d.find(".jedatehms input").on("keyup",function(){var b=a(this),f=b.val(),h=e.isContainhh(c.format),j=g(b.attr("numval")),k=g(b.attr("hms"));if(b.val(f.replace(/\D/g,"")),f>j){b.val(j);var l="cn"==i.name?"输入值不能大于 ":"The input value is not greater than ";alert(l+j)}""==f&&b.val("00"),d.find(".jedatehmscon").eq(k).children().each(function(){a(this).removeClass("action")}),d.find(".jedatehmscon").eq(k).children().eq(g(b.val().replace(/^0/g,""))).addClass("action"),a.each(["hours","minutes","seconds"],function(a,b){var c=d.find(".jedateprop"+b),e=c.find(".action");0!=h.length&&void 0!=h[a]&&(c[0].scrollTop=e[0].offsetTop-p)})}),d.find(".jedatebot .jedateclear").on("click",function(d){d.stopPropagation();var g=c.isValHtml(f)?f.val():f.text();c.isValHtml(f)?f.val(""):f.text(""),e.dateClose(),""!=g&&(c.isBool(b.clearRestore)&&(c.minDate=b.startMin||c.minDate,c.maxDate=b.startMax||c.maxDate),(a.isFunction(b.clearfun)||null!=b.clearfun)&&b.clearfun(f,g))}),d.find(".jedatebot .jedatetodaymonth").on("click",function(){var g=new Date,h=[g.getFullYear(),g.getMonth()+1,g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()],i=c.parse([h[0],h[1],h[2]],[h[3],h[4],h[5]],c.format),j=g.getFullYear()+"-"+c.digit(g.getMonth()+1)+"-"+c.digit(g.getDate())+" "+c.digit(g.getHours())+":"+c.digit(g.getMinutes())+":"+c.digit(g.getSeconds());if(c.isValHtml(f)?f.val(i):c.text(i),a(d.attr(k)).length>0){var l="#"+d.attr("id");e.setHtml(b,l)}e.dateClose(),(a.isFunction(b.choosefun)||null!=b.choosefun)&&b.choosefun(f,i,j)}),d.find(".jedatebot .jedateok").on("click",function(h){h.stopPropagation();var i=new Date,l=function(){var b=[];return d.find(".jedatehms input").each(function(){void 0===a(this).attr("disabled")&&b.push(a(this).val())}),b}(),m=j?[i.getFullYear(),i.getMonth()+1,i.getDate()]:c.reMacth(d.children("ul").attr("dateval")),n=a(a(c.boxelem).attr(k)).length>0?d.attr("jeformat"):c.format,o=c.parse([g(m[0]),g(m[1]),g(m[2])],[l[0]||0,l[1]||0,l[2]||0],n),p=(m[0]||i.getFullYear())+"-"+c.digit(m[1]||i.getMonth()+1)+"-"+c.digit(m[2]||i.getDate())+" "+c.digit(l[0]||0)+":"+c.digit(l[1]||0)+":"+c.digit(l[2]||0);c.isValHtml(f)?f.val(o):f.text(o),e.dateClose(),(a.isFunction(b.okfun)||null!=b.okfun)&&b.okfun(f,o,p)}),a(document).on("mouseup scroll",function(b){if(b.stopPropagation(),"#jedatebox"==c.boxelem){var d=a(c.boxelem);d&&"none"!==d.css("display")&&d.remove(),a("#jedatetipscon").length>0&&a("#jedatetipscon").remove()}}),a(c.boxelem).on("mouseup",function(a){a.stopPropagation()})},j.chooseDays=function(b,d){var e=this,f=e.valCell,i=new Date,l=b.language||h.language;d.find(".jedaul li").on("click",function(g){var h=a(d.attr(k)).length>0?d.attr("jeformat"):c.format,j=a(this),l=[];if(!j.hasClass("disabled")){g.stopPropagation(),d.find(".jedatehms input").each(function(){l.push(a(this).val())});var m=c.reMacth(j.attr("data-ymd")),n=c.parse([m[0],m[1],m[2]],[l[0],l[1],l[2]],h),o=(m[0]||i.getFullYear())+"-"+c.digit(m[1]||i.getMonth()+1)+"-"+c.digit(m[2]||i.getDate())+" "+c.digit(l[0])+":"+c.digit(l[1])+":"+c.digit(l[2]);if(c.isValHtml(f)?f.val(n):f.text(n),a(d.attr(k)).length>0){var p="#"+d.attr("id");e.setHtml(b,p)}else e.dateClose();b.festival&&a("#jedatetipscon").remove(),(a.isFunction(b.choosefun)||null!=b.choosefun)&&b.choosefun&&b.choosefun(f,n,o)}}),b.festival&&"cn"==l.name&&d.find(".jedaul li").on("mouseover",function(){var d=a(this),e=c.reMacth(d.attr("data-ymd")),f=a("<div/>",{id:"jedatetipscon",class:"jedatetipscon"}),h=jeLunar(g(e[0]),g(e[1])-1,g(e[2])),i="<p>"+h.solarYear+"年"+h.solarMonth+"月"+h.solarDate+"日 "+h.inWeekDays+'</p><p class="red">农历：'+h.shengxiao+"年 "+h.lnongMonth+"月"+h.lnongDate+"</p><p>"+h.ganzhiYear+"年 "+h.ganzhiMonth+"月 "+h.ganzhiDate+"日</p>",k=""!=(h.solarFestival||h.lunarFestival)?'<p class="red">节日：'+h.solarFestival+h.lunarFestival+"</p>":"",l=""!=h.jieqi?'<p class="red">'+(""!=h.jieqi?"节气："+h.jieqi:"")+"</p>":"",m=""!=(h.solarFestival||h.lunarFestival||h.jieqi)?k+l:"";a("body").append(f),f.html(i+m);var n=j.lunarOrien(f,d);f.css({"z-index":void 0==b.zIndex?2104:b.zIndex+5,top:n.top,left:n.left,position:"absolute",display:"block"})}).on("mouseout",function(){a("#jedatetipscon").length>0&&a("#jedatetipscon").remove()})},j.chooseYearMonth=function(b,d){var e=this,f=d.find(".yearprev"),i=d.find(".yearnext"),j=d.find(".monthprev"),k=d.find(".monthnext"),l=d.find(".jedatetopym"),m=d.find(".jedateyy"),n=d.find(".jedatemm"),o=d.find(".jedateyy .jedateyear"),p=d.find(".jedatemm .jedatemonth"),q=b.language||h.language,r=d.find(".jedateymchri"),s=d.find(".jedateymchle"),t=c.reMacth(c.minDate),u=t[0]+t[1],v=c.reMacth(c.maxDate),w=v[0]+v[1],x=function(b){var c,d="";return a.each(new Array(15),function(a,e){if(7===a){var f=o.attr("year");c=g(b)>=g(t[0])&&g(b)<=g(v[0])?f==b?'class="action"':"":'class="disabled"',d+="<li "+c+' yy="'+b+'">'+b+("cn"==q.name?"年":"")+"</li>"}else c=g(b-7+a)>=g(t[0])&&g(b-7+a)<=g(v[0])?"":'class="disabled"',d+="<li "+c+' yy="'+(b-7+a)+'">'+(b-7+a)+("cn"==q.name?"年":"")+"</li>"}),d},y=function(b,e){var f="";12==e?(a.each(q.month,function(a,b){var d=p.attr("month"),b=c.digit(b),e=g(o.attr("year")+b)>=g(u)&&g(o.attr("year")+b)<=g(w)?c.digit(d)==b?"action":"":"disabled";f+="<li class='"+e+"' mm='"+b+"'>"+b+("cn"==q.name?"月":"")+"</li>"}),a.each([r,s],function(a,b){b.hide()})):(f=x(b),a.each([r,s],function(a,b){b.show()})),l.removeClass(12==e?"jedatesety":"jedatesetm").addClass(12==e?"jedatesetm":"jedatesety"),d.find(".jedatetopym .ymdropul").html(f),l.show()};a.each([f,i],function(a,c){c.on("click",function(a){if("block"!=d.find(".jedatetopym").css("display")){a.stopPropagation();var h=g(o.attr("year")),i=g(p.attr("month")),j=c==f?--h:++h;e.createDaysHtml(j,i,b,d)}})}),a.each([j,k],function(a,f){f.on("click",function(a){if("block"!=d.find(".jedatetopym").css("display")){a.stopPropagation();var h=g(o.attr("year")),i=g(p.attr("month")),k=c.getPrevMonth(h,i),l=c.getNextMonth(h,i);f==j?e.createDaysHtml(k.y,k.m,b,d):e.createDaysHtml(l.y,l.m,b,d)}})}),a.each([m,n],function(f,h){h.on("click",function(){var f=a(this),i=f.attr("ym"),j=g(o.attr("year")),k=function(){d.find(".ymdropul li").on("click",function(f){var i=a(this),j=g(m==h?i.attr("yy"):o.attr("year")),k=m==h?g(p.attr("month")):c.digit(g(i.attr("mm")));i.hasClass("disabled")||(f.stopPropagation(),m==h?o.attr("year",j).html(j+("cn"==q.name?"年":"")):p.attr("month",k).html(k+("cn"==q.name?"月":"")),l.hide(),e.createDaysHtml(j,k,b,d))})};y(j,i),k(),d.find(".jedateymchok").on("click",function(a){a.stopPropagation(),l.hide()}),a.each([s,r],function(a,b){b.on("click",function(b){b.stopPropagation(),0==a?j-=15:j+=15;var c=x(j);d.find(".jedatetopym .ymdropul").html(c),k()})})})})},j.preNextYearMonth=function(b,d){var e=this,f=e.valCell,g=new Date,h=c.testFormat(c.format,"YYYY");d.find(h?".jedayy li":".jedaym li").on("click",function(d){if(!a(this).hasClass("disabled")){d.stopPropagation();var i=h?c.reMacth(a(this).attr("yy")):c.reMacth(a(this).attr("ym")),j=h?c.parse([i[0],g.getMonth()+1,1],[0,0,0],c.format):c.parse([i[0],i[1],1],[0,0,0],c.format);c.isValHtml(f)?f.val(j):f.text(j),e.dateClose(),(a.isFunction(b.choosefun)||null!=b.choosefun)&&b.choosefun(f,j)}})},j.onlyYMevents=function(b,d){var e,f=this,h=new Date,i=c.testFormat(c.format,"YYYY"),j=d.find(".jedateym .prev"),k=d.find(".jedateym .next"),l=c.reMacth(d.children("ul").attr("dateval")),m=g(l[0]),n=g(l[1]);a.each([j,k],function(a,g){g.on("click",function(a){a.stopPropagation(),i?(e=g==j?d.find(".jedayy li").eq(0).attr("yy"):d.find(".jedayy li").eq(c.yearArr.length-1).attr("yy"),d.find(".jedayy").html(f.eachYM(b,e,h.getMonth()+1,d))):(e=g==j?m-=1:m+=1,d.find(".jedaym").html(f.eachYM(b,e,n,d))),f.preNextYearMonth(b,d)})})},a.dateVer="3.8.3",a.nowDate=function(a,b,d){return b=b||"YYYY-MM-DD hh:mm:ss",d=d||[],c.returnDate(a,b,d)},a.timeStampDate=function(a,b,d){if(d=d||"YYYY-MM-DD hh:mm:ss",1==b){var e=new Date(1e3*g(a.substring(0,10)));return c.parse([e.getFullYear(),c.digit(e.getMonth()),c.digit(e.getDate())],[c.digit(e.getHours()),c.digit(e.getMinutes()),c.digit(e.getSeconds())],d)}var f=c.reMacth(a);return new Date(f[0],f[1],f[2],f[3],f[4],f[5]).getTime().toString().substr(0,10)},a.splitDate=function(a){var b=a.match(/\w+|d+/g);return{YYYY:g(b[0]),MM:g(b[1])||0,DD:g(b[2])||0,hh:g(b[3])||0,mm:g(b[4])||0,ss:g(b[5])||0}},a.getLunar=function(a){if(/\YYYY-MM-DD/.test(c.formatType)){var b=a.substr(0,4).replace(/^(\d{4})/g,"$1,")+a.substr(4).replace(/(.{2})/g,"$1,"),d=c.IsNum(a)?c.reMacth(b):c.reMacth(a),e=jeLunar(d[0],d[1]-1,d[2]);return{nMonth:e.lnongMonth,nDays:e.lnongDate,yYear:g(e.solarYear),yMonth:g(e.solarMonth),yDays:g(e.solarDate),cWeek:e.inWeekDays,nWeek:e.solarWeekDay}}},b}),function(a,b){a.jeLunar=b(a.jeLunar)}(this,function(a){function b(a){var b=function(a,b){return new Date(31556925974.7*(a-1900)+6e4*d[b]+Date.UTC(1900,0,6,2,5)).getUTCDate()},n=function(a){var b,d=348;for(b=32768;b>8;b>>=1)d+=c[a-1900]&b?1:0;return d+p(a)},o=function(a){return e.charAt(a%10)+f.charAt(a%12)},p=function(a){return q(a)?65536&c[a-1900]?30:29:0},q=function(a){return 15&c[a-1900]},r=function(a,b){return c[a-1900]&65536>>b?30:29},s=function(a){var b,c=0,d=0,e=new Date(1900,0,31),f=(a-e)/864e5;for(this.dayCyl=f+40,this.monCyl=14,b=1900;b<2050&&f>0;b++)d=n(b),f-=d,this.monCyl+=12;for(f<0&&(f+=d,b--,this.monCyl-=12),this.year=b,this.yearCyl=b-1864,c=q(b),this.isLeap=!1,b=1;b<13&&f>0;b++)c>0&&b==c+1&&0==this.isLeap?(--b,this.isLeap=!0,d=p(this.year)):d=r(this.year,b),1==this.isLeap&&b==c+1&&(this.isLeap=!1),f-=d,0==this.isLeap&&this.monCyl++;0==f&&c>0&&b==c+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--b,--this.monCyl)),f<0&&(f+=d,--b,--this.monCyl),this.month=b,this.day=f+1},t=function(a){return a<10?"0"+(0|a):a},u=function(a,b){var c=a;return b.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(a){switch(a){case"yyyy":var b="000"+c.getFullYear();return b.substring(b.length-4);case"dd":return t(c.getDate());case"d":return c.getDate().toString();case"MM":return t(c.getMonth()+1);case"M":return c.getMonth()+1}})},v=function(a,b){var c;switch(b){case 10:c="初十";break;case 20:c="二十";break;case 30:c="三十";break;default:c=j.charAt(Math.floor(b/10)),c+=i.charAt(b%10)}return c};this.isToday=!1,this.isRestDay=!1,this.solarYear=u(a,"yyyy"),this.solarMonth=u(a,"M"),this.solarDate=u(a,"d"),this.solarWeekDay=a.getDay(),this.inWeekDays="星期"+i.charAt(this.solarWeekDay);var w=new s(a);this.lunarYear=w.year,this.shengxiao=g.charAt((this.lunarYear-4)%12),this.lunarMonth=w.month,this.lunarIsLeapMonth=w.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+k[w.month-1]:k[w.month-1],this.lunarDate=w.day,this.showInLunar=this.lnongDate=v(this.lunarMonth,this.lunarDate),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=o(w.yearCyl),this.ganzhiMonth=o(w.monCyl),this.ganzhiDate=o(w.dayCyl++),this.jieqi="",this.restDays=0,b(this.solarYear,2*(this.solarMonth-1))==u(a,"d")&&(this.showInLunar=this.jieqi=h[2*(this.solarMonth-1)]),b(this.solarYear,2*(this.solarMonth-1)+1)==u(a,"d")&&(this.showInLunar=this.jieqi=h[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=l[u(a,"MM")+u(a,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=m[this.lunarIsLeapMonth?"00":t(this.lunarMonth)+t(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==r(this.lunarYear,12)&&(this.lunarFestival=m["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var c=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],d=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],e="甲乙丙丁戊己庚辛壬癸",f="子丑寅卯辰巳午未申酉戌亥",g="鼠牛虎兔龙蛇马羊猴鸡狗猪",h=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],i="日一二三四五六七八九十",j="初十廿卅",k=["正","二","三","四","五","六","七","八","九","十","十一","腊"],l={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},m={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};return function(a,c,d){return new b(new Date(a,c,d))}});
